<div class="signup-body">
  <div class="signup-container">
    <!-- Left Side - Logo & Welcome -->
    <div class="signup-left">
      <div class="signup-brand">
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-heartbeat" style="color: white; font-size: 2rem;"></i>
          </div>
          <div class="logo-text">MediLink</div>
        </div>
        <h1>Rejoignez-nous</h1>
        <p>Créez votre compte pour accéder à tous nos services médicaux</p>
      </div>
    </div>

    <!-- Right Side - Signup Form -->
    <div class="signup-right">
      <div class="signup-card">
        <div class="signup-header">
          <h2><i class="fas fa-user-plus"></i> Créer un compte</h2>
          <p>Rejoignez la communauté MediLink</p>
        </div>

        <!-- Type d'utilisateur -->
        <div class="user-type-selection">
          <button type="button" class="user-type-btn active" data-type="patient">
            <i class="fas fa-user"></i><br>
            Patient
          </button>
          <button type="button" class="user-type-btn" data-type="medecin">
            <i class="fas fa-user-md"></i><br>
            Médecin
          </button>
        </div>

        <form class="signup-form" id="signupForm" (ngSubmit)="onSubmit(signupForm)" #signupForm="ngForm">

          <!-- Nom et Prénom -->
          <div class="form-row">
            <div class="form-group">
              <label for="prenom"><i class="fas fa-user"></i> Prénom</label>
              <input type="text" id="prenom" name="prenom" placeholder="Votre prénom" required [(ngModel)]="formData.prenom">
              <div class="input-icon"><i class="fas fa-user"></i></div>
            </div>
            <div class="form-group">
              <label for="nom"><i class="fas fa-user"></i> Nom</label>
              <input type="text" id="nom" name="nom" placeholder="Votre nom" required [(ngModel)]="formData.nom">
              <div class="input-icon"><i class="fas fa-user"></i></div>
            </div>
          </div>

          <!-- Email -->
          <div class="form-group">
            <label for="email"><i class="fas fa-envelope"></i> Adresse e-mail</label>
            <input type="email" id="email" name="email" placeholder="votre.email@example.com" required [(ngModel)]="formData.email">
            <div class="input-icon"><i class="fas fa-envelope"></i></div>
          </div>

          <!-- Téléphone -->
          <div class="form-group">
            <label for="telephone"><i class="fas fa-phone"></i> Téléphone</label>
            <input type="tel" id="telephone" name="telephone" placeholder="+33 1 23 45 67 89" [(ngModel)]="formData.telephone">
            <div class="input-icon"><i class="fas fa-phone"></i></div>
          </div>

          <!-- Date de naissance -->
          <div class="form-group">
            <label for="dateNaissance"><i class="fas fa-calendar"></i> Date de naissance</label>
            <input type="date" id="dateNaissance" name="dateNaissance" required [(ngModel)]="formData.dateNaissance">
            <div class="input-icon"><i class="fas fa-calendar"></i></div>
          </div>
          <div class="form-group">
            <label for="num_cin"><i class="fas fa-id-card"></i> Numéro CIN</label>
            <input 
              type="text" 
              id="num_cin" 
              name="num_cin" 
              placeholder="Ex: 12345678" 
              required 
              pattern="[0-9]{8}"
              [(ngModel)]="formData.num_cin"
            >
            <div class="input-icon"><i class="fas fa-id-card"></i></div>
            <!-- Petit message d'aide si invalide -->
            @if (signupForm.controls['num_cin']?.invalid && signupForm.controls['num_cin']?.touched) {
              <div class="field-error">8 chiffres requis</div>
            }
          </div>
          <div class="form-group">
            <label for="sexe"><i class="fas fa-venus-mars"></i> Sexe</label>
            <select id="sexe" name="sexe" required [(ngModel)]="formData.sexe">
              <option value="femme">Femme</option>
              <option value="homme">Homme</option>
            </select>
            <div class="input-icon"><i class="fas fa-venus-mars"></i></div>
          </div>
          @if (userType === 'medecin') {
            <div class="medecin-fields">
              
              <div class="form-group">
                <label for="specialite"><i class="fas fa-user-md"></i> Spécialité</label>
                <input type="text" id="specialite" name="specialite" placeholder="Ex: Cardiologue" required [(ngModel)]="formData.specialite">
                <div class="input-icon"><i class="fas fa-stethoscope"></i></div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="cabinet"><i class="fas fa-building"></i> Cabinet</label>
                  <input type="text" id="cabinet" name="cabinet" placeholder="Adresse du cabinet" required [(ngModel)]="formData.cabinet">
                  <div class="input-icon"><i class="fas fa-map-marker-alt"></i></div>
                </div>

                <div class="form-group">
                  <label for="tarif"><i class="fas fa-euro-sign"></i> Tarif Consultation</label>
                  <input type="number" id="tarif" name="tarif" placeholder="Prix en DT" required [(ngModel)]="formData.tarif_consultation">
                  <div class="input-icon"><i class="fas fa-money-bill-wave"></i></div>
                </div>
              </div>

            </div>
          }
          <!-- Mot de passe -->
          <div class="form-group">
            <label for="password"><i class="fas fa-lock"></i> Mot de passe</label>
            <input type="password" id="password" name="password" placeholder="••••••••" required [(ngModel)]="formData.password" (input)="onPasswordInput()">
            <div class="input-icon"><i class="fas fa-lock"></i></div>
            <div class="password-strength">
              <div class="strength-bar">
                <div class="strength-fill" [ngClass]="passwordStrengthClass"></div>
              </div>
              <div class="strength-text">{{ passwordStrengthText }}</div>
            </div>
          </div>

          <!-- Confirmation mot de passe -->
          <div class="form-group">
            <label for="confirmPassword"><i class="fas fa-lock"></i> Confirmer le mot de passe</label>
            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="••••••••" required [(ngModel)]="formData.confirmPassword">
            <div class="input-icon"><i class="fas fa-lock"></i></div>
          </div>





          <!-- Messages d'erreur/succès -->
           @if(errorMessage){
          <div class="error-message" >
            <i class="fas fa-exclamation-circle"></i>
            <span>{{ errorMessage }}</span>
          </div>
        }
        @if(successMessage){
          <div class="success-message" >
            <i class="fas fa-check-circle"></i>
            <span>{{ successMessage }}</span>
          </div>
        }
          <!-- Bouton d'inscription -->
          <button type="submit" class="btn-signup" id="submitBtn" [disabled]="loading">
            <i class="fas fa-user-plus"></i> Créer mon compte
          </button>

        </form>

        <!-- Lien de connexion -->
        <div class="login-link">
          <p>Déjà un compte ? <a [routerLink]="['/login']">Se connecter</a></p>
        </div>
      </div>
    </div>
  </div>

   @if(loading){
  <div class="loading-overlay" >
    <div class="loading-spinner"></div>
  </div>
}
</div>
